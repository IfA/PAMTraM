var __opccli=null;
function OPCClientInterface(g){__opccli=this;this._OPCResources=g;this.clientDescription=new this._OPCResources.complexTypes.ApplicationDescription("","",new this._OPCResources.builtInTypes.LocalizedText(0,"de","JSUA OPC-Client"),1,"","","");this.namespaceView=new this._OPCResources.complexTypes.ViewDescription(new this._OPCResources.builtInTypes.NodeId(2,new this._OPCResources.builtInTypes.NumericNodeId(0,0)),0,0);this.translateBrowsePathsToNodeIds=function(b,a,c,e,f){(b.length!==a.length||"undefined"===
typeof c)&&this._OPCResources.terminal.error("!err TranslateBrowsePathsToNodeIds failed: Dimensions of startingNode and browsePaths don't match, or no NameSpace specified.");for(var d=0;d<b.length;d++){for(var h=a[d],l=[],k=0;k<h.length;k++)l[k]=new this._OPCResources.complexTypes.RelativePathElement(new this._OPCResources.builtInTypes.NodeId(2,new this._OPCResources.builtInTypes.NumericNodeId(0,__opcdef.idByDef("opc_ua_identifier_HierarchicalReferences"))),!1,!0,new this._OPCResources.builtInTypes.QualifiedName(c,
h[k]));a[d]=new this._OPCResources.complexTypes.BrowsePath(b[d],new this._OPCResources.complexTypes.RelativePath(l))}new this._OPCResources.communication.commTask("TranslateBrowsePathsToNodeIds",{browsePaths:a},function(a){var c=!1;this.status="idle";"error"==a.status&&(this._OPCResources.terminal.error("!err Browsing failed: "+a.errorMessage),c=!0);var d=null;c||(d=a.response.results);e&&(f?e.apply(f,[d]):e(d))},this)};this.browseNodeId=function(b,a,c,e,f){a="undefined"===typeof a?this.namespaceView:
a;new this._OPCResources.communication.commTask("Browse",{requestedMaxReferencesPerNode:0,view:a,nodesToBrowse:[new this._OPCResources.complexTypes.BrowseDescription(b,0,new this._OPCResources.builtInTypes.NodeId(2,new this._OPCResources.builtInTypes.NumericNodeId(0,("undefined"===typeof c?0:c)?0:__opcdef.idByDef("opc_ua_identifier_HierarchicalReferences"))),1,0,63)]},function(a){leave=!1;this.status="idle";"error"==a.status&&(this._OPCResources.terminal.error("!err Browsing failed: "+a.errorMessage),
leave=!0);results=null;leave||(results=a.response.results[0].references);e&&(f?e.apply(f,[results,a]):e(results,a))},this)};this.browseNodeIds=function(b,a,c,e,f){a="undefined"===typeof a?this.namespaceView:a;c="undefined"===typeof c?!1:c;var d=[];for(i in b)d[i]=new this._OPCResources.complexTypes.BrowseDescription(b[i],0,new this._OPCResources.builtInTypes.NodeId(2,new this._OPCResources.builtInTypes.NumericNodeId(0,c?0:__opcdef.idByDef("opc_ua_identifier_HierarchicalReferences"))),1,0,63);new this._OPCResources.communication.commTask("Browse",
{requestedMaxReferencesPerNode:0,view:a,nodesToBrowse:d},function(a){leave=!1;this.status="idle";"error"==a.status&&(this._OPCResources.terminal.error("!err Browsing failed: "+a.errorMessage),leave=!0);results=null;leave||(results=a.response.results);e&&(f?e.apply(f,[results,a]):e(results,a))},this)};this.registerNodes=function(b,a,c){new this._OPCResources.communication.commTask("RegisterNodes",{nodesToRegister:b},function(e){leave=!1;this.status="idle";"error"==e.status&&(this._OPCResources.terminal.error("!err Reading failed: "+
e.errorMessage),leave=!0);a&&(c?a.apply(c):a())},this)};this.readNodes=function(b,a,c,e){for(var f=[],d=0;d<b.length;d++)f.push(new this._OPCResources.complexTypes.ReadValueId(b[d],a[d],"",new this._OPCResources.builtInTypes.QualifiedName(0,"")));new this._OPCResources.communication.commTask("Read",{maxAge:0,timestampsToReturn:2,nodesToRead:f},function(a){leave=!1;this.status="idle";"error"==a.status&&(this._OPCResources.terminal.error("!err Reading failed: "+a.errorMessage),leave=!0);results=null;
leave||(results=a.response.results);c&&(e?c.apply(e,[results,a]):c(results,a))},this)};this.writeNodes=function(b,a,c,e,f){var d=[];for(i in b)d.push(new this._OPCResources.complexTypes.WriteValue(b[i],a[i],"",c[i]));new this._OPCResources.communication.commTask("Write",{maxAge:0,timestampsToReturn:2,nodesToWrite:d},function(a){leave=!1;this.status="idle";"error"==a.status&&(this._OPCResources.terminal.error("!err Writing failed: "+a.errorMessage),leave=!0);results=null;leave||(results=a.response.results);
e&&(f?e.apply(f,[results,a]):e(results,a))},this)}};var __opcclicm=null;
function OPCClientInterfaceConnectionManager(g){function b(a,c){this._OPCResources.terminal.log("+sending PublishRequest");for(var e=[],f;void 0!==(f=__opcclicm.unacknowledgedSequenceNumbers.pop());)e.push(new this._OPCResources.complexTypes.SubscriptionAcknowledgement(__opcclism.subscriptions[0].id,f));availablePublishRequestsCounter++;new this._OPCResources.communication.commTask("Publish",{subscriptionAcknowledgements:e},function(d){availablePublishRequestsCounter--;availablePublishRequestsCounter<__opcclicm.minAvailablePublishRequests&&
b.apply(this);leave=!1;this.status="idle";"error"==d.status&&(this._OPCResources.terminal.error("!err Sending PublishRequest  failed: "+d.errorMessage),leave=!0);void 0===d.response.notificationMessage.notificationData&&(__opcclism._OPCResources.terminal.log("+received Keep-Alive-Message"),leave=!0);if(!leave){__opcclicm.unacknowledgedSequenceNumbers.push(d.response.notificationMessage.sequenceNumber);for(var e=d.response.notificationMessage.notificationData.monitoredItems,f=0;f<e.length;f++){var k=
e[f].value.value.value;__opcclism._OPCResources.terminal.log("+received new Value");var g=__opcclism.monitoredItems[e[f].clientHandle],m=$.grep(__opccliasm.opclist,function(a,c){return a.nodeId==g});0==m.length?__opcres.consoleLog&&console.log("No TreeNode found for NodeId "+g+"! The client-side list of monitored items might not yet have been updated..."):m[0].updateData(k)}}availablePublishRequestsCounter<__opcclicm.minAvailablePublishRequests&&b.apply(this);a&&(c?a.apply(c,[e,d]):a(results,d))},
this)}__opcclicm=this;this._OPCResources=g;this.endpoints=[];this.endpointFilter=!0;this.allowedSecurityModes=["1"];this.allowedProtocols=["http"];this.stdSessionTimeout=4E4;this.session=this.sessionStatusListener=this.currentEndpoint=null;this.unacknowledgedSequenceNumbers=[];availablePublishRequestsCounter=this.minAvailablePublishRequests=0;this.anonymousUser={clientSignature:new this._OPCResources.complexTypes.SignatureData("null",this._OPCResources.definitions.uriBySecPolicy("None")),clientSoftwareCertificate:"",
userIdentityToken:new this._OPCResources.builtInTypes.ExtensionObject(new this._OPCResources.builtInTypes.NodeId(1,new this._OPCResources.builtInTypes.FourByteNodeId(1,321)),2,null,"null"),userTokenSignature:new this._OPCResources.complexTypes.SignatureData("null",this._OPCResources.definitions.uriBySecPolicy("None"))};this.retrieveEndpoints=function(a,c){this.resetSession();this.status="pending";var e=function(e){leave=!1;this.status="idle";"error"==e.status&&(this._OPCResources.terminal.error("!err Send Message Failed: check Setup, Proxy, Webserver, OPC-UA-Server! ErrorMessage: "+
e.errorMessage),leave=!0);endp=e.response.endpoints;this.endpoints=[];!leave&&!endp&&(this._OPCResources.terminal.error("!err No endpoints available."),leave=!0);if(!leave){for(i in endp)if("object"===typeof endp[i]&&"string"===typeof endp[i].securityMode){checkprotocol=!1;if("string"===typeof endp[i].endpointUrl)for(j in this.allowedProtocols)if(0==endp[i].endpointUrl.indexOf(this.allowedProtocols[j])){checkprotocol=!0;break}0<=this.allowedSecurityModes.indexOf(endp[i].securityMode.toString())||
(checkprotocol=!1);(checkprotocol||!this.endpointFilter)&&this.endpoints.push(endp[i])}this._OPCResources.terminal.log("+Recieved endpoints - available endpoints: "+endp.length+", matching filter: "+this.endpoints.length);this._OPCResources.terminal.log("-> choose one to connect to")}a&&(c?a.apply(c):a())}.bind(this),b=function(a){"error"==a.status?(this._OPCResources.terminal.log("-Retrieving Endpoints..."),__opccomm.useArrayBufferView=!1,new this._OPCResources.communication.commTask("GetEndpoints",
{},e,this)):e(a)}.bind(this);this._OPCResources.terminal.log("-Retrieving Endpoints...");new this._OPCResources.communication.commTask("GetEndpoints",{},b,this)};this.connectToEndpoint=function(a,c,e,f){function d(c,d,b){this.currentEndpoint=this.endpoints[a];this._OPCResources.terminal.log("-Starting session at endpoint no. "+a+"...");d={clientDescription:this._OPCResources.clientInterface.clientDescription,serverUri:this.currentEndpoint.server.applicationUri,endpointUrl:this.currentEndpoint.endpointUrl,
sessionName:"JSUA",clientNonce:"3145",clientCertificate:this._OPCResources.builtInTypes.string2binary(""),requestedSessionTimeout:this.stdSessionTimeout,maxResponseMessageSize:0};new this._OPCResources.communication.commTask("CreateSession",d,function(a){leave=!1;this.status="idle";"error"==a.status&&(this._OPCResources.terminal.error("!err Starting session failed: "+a.errorMessage),leave=!0);response=a.response;if("object"!==typeof response.sessionId||"string"!==typeof response.revisedSessionTimeout)this._OPCResources.terminal.error("!err No sessiondata recieved"),
leave=!0;leave||(this.session={id:a.response.sessionID,serverCertificate:a.response.serverCertificate,timeout:parseInt(0.8*a.response.revisedSessionTimeout),createTime:(new Date).getTime(),authenticationToken:a.response.authenticationToken},this.setSessionStatus("inactive"),this._OPCResources.communication.sessionSettings.requestHeader={authenticationToken:this.session.authenticationToken},this._OPCResources.terminal.log("+Created Session"),h.apply(this,[c,e,b]))},this)}function h(a,c,e){this._OPCResources.terminal.log("-Activating Session...");
user=this.anonymousUser;this.session.user=user;new this._OPCResources.communication.commTask("ActivateSession",{clientSignature:user.clientSignature,clientSoftwareCertificates:user.clientSoftwareCertificate,localeIds:"null",userIdentityToken:user.userIdentityToken,userTokenSignature:user.userTokenSignature},function(d){leave=!1;this.status="idle";"error"==d.status&&(this._OPCResources.terminal.error("!err Activating session failed: "+d.errorMessage),leave=!0);leave||(this._OPCResources.terminal.log("+Activated Session"),
this.setSessionStatus("active"),this._OPCResources.subscriptionManager.createSubscription.apply(this,[e,c]),b.apply(__opcclism));this._OPCResources.terminal.log("+Set Heartbeat-interval to "+this.session.timeout+" millisecconds");$(this).everyTime(this.session.timeout,"sessionHeartBeat",this.heartBeatFunction);"function"===typeof a&&(c?a.apply(c):a())},this)}null==a||0>a||a>=this.endpoints.length?this._OPCResources.terminal.error("!err number of targetendpoint not in range of available endpoints"):
(this.status="pending",this.resetSession(function(){d.apply(this,[c,e,f])},this))};this.disconnectFromEndpoint=function(a,c){this._OPCResources.terminal.log("-closing Session...");new this._OPCResources.communication.commTask("CloseSession",{deleteSubscriptions:1},function(e){leave=!1;this.status="idle";this._OPCResources.communication.sessionSettings.requestHeader={};"error"==e.status&&(this._OPCResources.terminal.error("!err Closing session failed: "+e.errorMessage),this.setSessionStatus("error"),
leave=!0);leave||(this._OPCResources.terminal.log("+Closed Session"),this.setSessionStatus("inactive"));a&&(c?a.apply(c):a())},this)};this.resetSession=function(a,c){function e(){this.setSessionStatus("inactive");a&&(c?a.apply(c):a())}this.session||this.currentEndpoint?"active"==this.session.status?(this._OPCResources.terminal.log("-Resetting Connection"),this.disconnectFromEndpoint(function(){this.currentEndpoint=this.session=null;__opccliasm.opctree=null;$(this).stopTime("sessionHeartBeat");e.apply(this)},
this)):(this.currentEndpoint=this.session=null,__opccliasm.opctree=null,$(this).stopTime("sessionHeartBeat"),e.apply(this)):e.apply(this)};this.setSessionStatus=function(a){this.session&&(this.session.status=a);"function"===typeof this.sessionStatusListener&&this.sessionStatusListener(a)};this.heartBeatFunction=function(a,c){this!=__opcclicm?__opcclicm.heartBeatFunction.apply(__opcclicm):(user=this.session.user,"active"==this.session.status?(this._OPCResources.terminal.log("-Sending Heartbeat"),new this._OPCResources.communication.commTask("ActivateSession",
{clientSignature:user.clientSignature,clientSoftwareCertificates:user.clientSoftwareCertificate,localeIds:"null",userIdentityToken:user.userIdentityToken,userTokenSignature:user.userTokenSignature},function(e){leave=!1;this.status="idle";"error"==e.status&&(this._OPCResources.terminal.error("!err Heartbeat failed: "+e.errorMessage),this.setSessionStatus("error"),leave=!0);leave||this._OPCResources.terminal.log("+Heartbeat done");"function"===typeof a&&(c?a.apply(c):a())},this)):$(this).stopTime("sessionHeartBeat"))}}
;var __opcclism=null;
function OPCClientInterfaceSubscriptionManager(g){__opcclism=this;this._OPCResources=g;this.pubInterval=20;this.subscriptions=[];this.monitoredItems={};this.createSubscription=function(b,a){__opcclism._OPCResources.terminal.log("+creating subscription");__opcclicm.minAvailablePublishRequests+=2;new __opcclism._OPCResources.communication.commTask("CreateSubscription",{requestedPublishingInterval:__opcclism.pubInterval,requestedLifetimeCount:100,requestedMaxKeepAliveCount:1,maxNotificationsPerPublish:0,publishingEnabled:1,
priority:0},function(c){leave=!1;this.status="idle";"error"==c.status&&(__opcclism._OPCResources.terminal.error("!err Creating Subscription  failed: "+c.errorMessage),__opcclicm.minAvailablePublishRequests-=2,leave=!0);response=c.response;if("string"!==typeof response.subscriptionId||"string"!==typeof response.revisedPublishingInterval||"string"!==typeof response.revisedLifetimeCount||"string"!==typeof response.revisedMaxKeepAliveCount)__opcclism._OPCResources.terminal.error("!err No subscriptiondata recieved"),
leave=!0;leave||(__opcclism.subscriptions.push({id:c.response.subscriptionId,publishingInterval:parseInt(c.response.revisedPublishingInterval),createTime:(new Date).getTime()}),__opcclism._OPCResources.terminal.log("+created subscription"),b&&(a?b.apply(a,[c]):b(c)))},this)};this.startMonitoring=function(b,a,c,e){__opcclism._OPCResources.terminal.log("-starting monitoring Variable value(s)");var f=b instanceof Array?b:[b],d=a instanceof Array?a:[a];b=[];for(i in f)b.push(new this._OPCResources.complexTypes.MonitoredItemCreateRequest(new __opcclism._OPCResources.complexTypes.ReadValueId(f[i],
13,"",new __opcclism._OPCResources.builtInTypes.QualifiedName(0,"")),2,new __opcclism._OPCResources.complexTypes.MonitoringParameters(d[i],-1,new __opcclism._OPCResources.builtInTypes.ExtensionObject(new __opcclism._OPCResources.builtInTypes.NodeId(0,new __opcclism._OPCResources.builtInTypes.TwoByteNodeId(0)),0),1,1)));new this._OPCResources.communication.commTask("CreateMonitoredItems",{subscriptionId:__opcclism.subscriptions[0].id,timestampsToReturn:2,itemsToCreate:b},function(a){leave=!1;this.status=
"idle";"error"==a.status&&(__opcclism._OPCResources.terminal.error("!err Creating MonitoredItems failed: "+a.errorMessage),leave=!0);response=a.response;if(!leave){for(i in f){this.monitoredItems[d[i]]=f[i];var b=$.grep(__opccliasm.opclist,function(a,c){return a.nodeId==f[i]});0==b.length?console.log("No TreeNode found for NodeId "+f[i]):(b[0].isMonitored=!0,b[0].monitoredItemId=response.results[0].monitoredItemId)}__opcclism._OPCResources.terminal.log("+created MonitoredItems")}c&&(e?c.apply(e,[response.results[0],
a]):c(response.results[0],a))},this)};this.stopMonitoring=function(b,a,c){__opcclism._OPCResources.terminal.log("-stopping monitoring Variable value");var e=__opcclism.monitoredItems[b],f=$.grep(__opccliasm.opclist,function(a,c){return a.nodeId==e})[0].monitoredItemId;new this._OPCResources.communication.commTask("DeleteMonitoredItems",{subscriptionId:__opcclism.subscriptions[0].id,monitoredItemIds:[f]},function(d){leave=!1;this.status="idle";"error"==d.status&&(__opcclism._OPCResources.terminal.err("!err Deleting MonitoredItems failed: "+
d.errorMessage),leave=!0);response=d.response;if(!leave){var f=$.grep(__opccliasm.opclist,function(a,c){return a.nodeId==e});0==f.length?console.log("No TreeNode found for NodeId "+e):(f[0].isMonitored=!1,f[0].monitoredItemId=null);delete __opcclism.monitoredItems[b];__opcclism._OPCResources.terminal.log("+deleted MonitoredItems")}a&&(c?a.apply(c,[items,d]):a(results,d))},this)}};var __opccliasm=null;
function OPCClientInterfaceAdressSpaceManager(g){__opccliasm=this;this._OPCResources=g;this.initialBrowseDepth=1;this.opclist=[];this.opctree=null;this.browseNamespace=function(b,a){this.buildRootNode(function(){function c(a,b,d,h){function g(a,e,b,d){index=0;max=e.childNodes.length-1;for(j in e.childNodes)"has"!=j&&c(a+1,e.childNodes[j],function(){++index>max&&b&&(d?b.apply(d):b())},this)}max=b.childNodes.length-1;index=0;if(a==__opccliasm.initialBrowseDepth)h?d.apply(h):d();else if(0>=b.childNodes.length)d&&
(h?d.apply(h):d());else for(j in b.childNodes)"has"!=j&&b.childNodes[j].browse(function(){++index>=max&&g(a,b,d,h)},this)}null!=__opccliasm.opctree?(this._OPCResources.terminal.log("-Started Browsing the Namespace..."),__opccliasm.opctree.browse(function(){c(0,__opccliasm.opctree,function(){this._OPCResources.terminal.log("+Finished Browsing the Namespace with initial depth of "+__opccliasm.initialBrowseDepth+".");b&&(a?b.apply(a):b())},this)},this)):(this._OPCResources.terminal.error("!err Failed to Browse Rootfolder"),
b&&(a?b.apply(a):b()))},this)};this.buildRootNode=function(b,a){function c(c){"error"!=c.status&&(rootNodeResult=c.response.results[0].references[0],__opccliasm.opctree=new __opctn.TreeNode(rootNodeResult.nodeId.nodeId,null,{browseName:rootNodeResult.browseName,displayName:rootNodeResult.displayName,nodeClass:rootNodeResult.nodeClass,referenceTypeId:rootNodeResult.referenceTypeId,typeDefinition:rootNodeResult.typeDefinition}));b&&(a?b.apply(a):b())}(function(a){new __opccomm.commTask("Browse",{requestedMaxReferencesPerNode:0,
view:__opccli.namespaceView,nodesToBrowse:[new this._OPCResources.complexTypes.BrowseDescription(new this._OPCResources.builtInTypes.NodeId(2,new this._OPCResources.builtInTypes.NumericNodeId(0,this._OPCResources.definitions.idByDef("ObjectsFolder"))),1,new this._OPCResources.builtInTypes.NodeId(2,new this._OPCResources.builtInTypes.NumericNodeId(0,0)),0,1,63)]},c,this)}).apply(this)}};var __opcres=null;
function OPCResources(g){__opcres=this;this.terminal=g;this.consoleLog=!1;this.ResourceNotFoundException=function(b){this.name="File not found";this.message=b;this.toString=function(){return this.name+": Required Ressource not found/available: "+(this.message?this.message:"")}};this.BrowserNotSupportedException=function(b){this.name="Browser not supported";this.message=b;this.toString=function(){return this.name+": Your browser does not support the following feature required by JSUA: "+(this.message?
this.message:"")}};if("undefined"===typeof g||null==g)throw new this.ResourceNotFoundException("Terminal");if(void 0===window.Uint8Array)throw new this.BrowserNotSupportedException("Uint8Array");if("undefined"===typeof __opccomm)throw new this.ResourceNotFoundException("OPCCommunication.js");if("undefined"===typeof __opcdef)throw new this.ResourceNotFoundException("OPCDefinitions.js");if("undefined"===typeof __opcex)throw new this.ResourceNotFoundException("OPCExceptions.js");if("undefined"===typeof __opcbit)throw new this.ResourceNotFoundException("OPCBuiltInTypes.js");
if("undefined"===typeof __opcct)throw new this.ResourceNotFoundException("OPCComplexTypes.js");if("undefined"===typeof __opcreqm)throw new this.ResourceNotFoundException("OPCrequestMessages.js");if("undefined"===typeof __opcresm)throw new this.ResourceNotFoundException("OPCResponseMessages.js");if("undefined"===typeof __opcu)throw new this.ResourceNotFoundException("OPCUtils.js");if("undefined"===typeof __opcservs)throw new this.ResourceNotFoundException("OPCServiceSets.js");if("undefined"===typeof $)throw new this.ResourceNotFoundException("jquery-*.*.*.min.js");
if("undefined"===typeof $(this).everyTime)throw new this.ResourceNotFoundException("jquery.timers-1.2.0.min.js");if("undefined"===typeof BigInteger)throw new this.ResourceNotFoundException("biginteger.js");if("undefined"===typeof __opccli)throw new this.ResourceNotFoundException("OPCClientInterface.js");if("undefined"===typeof __opcclicm)throw new this.ResourceNotFoundException("OPCClientInterface.ConnectionManager.js");if("undefined"===typeof __opcclism)throw new this.ResourceNotFoundException("OPCClientInterface.SubscriptionManager.js");
if("undefined"===typeof __opccliasm)throw new this.ResourceNotFoundException("OPCClientInterface.AdressSpaceManager.js");if("undefined"===typeof __opctn)throw new this.ResourceNotFoundException("OPCTreeNode.js");this.definitions=new OPCDefinitions(this);this.exceptions=new OPCExceptions(this);this.utils=new OPCUtils(this);this.builtInTypes=new OPCBuiltInTypes(this);this.communication=new OPCComm(this);this.complexTypes=new OPCComplexTypes(this);this.requestMessages=new OPCRequestMessages(this);this.responseMessages=
new OPCResponseMessages(this);this.serviceSets=new OPCServiceSets(this);this.clientInterface=new OPCClientInterface(this);this.subscriptionManager=new OPCClientInterfaceSubscriptionManager(this);this.connectionManager=new OPCClientInterfaceConnectionManager(this);this.adressSpaceManager=new OPCClientInterfaceAdressSpaceManager(this);$(window).on("beforeunload",function(){__opcclicm.disconnectFromEndpoint();return __opcres.terminal=null})};var __opctn=function(){return{TreeNode:function(g,b,a){$.extend(this,a);this.nodeId=g;this.childNodes=[];this.parentNode=null;this.view=b?b:__opccli.namespaceView;this.isMonitored=this.isBrowsed=!1;this.standardObserver=function(){this.notify=function(a){console.log("new data: ",a.value)}};this.observers=[];this.id=__opccliasm.opclist.length;__opccliasm.opclist.push(this);this.browse=function(a,b,f){__opcres.terminal.log("-Browsing Node "+this.displayName.text+"...");__opccli.browseNodeId(this.nodeId,
this.view,f,function(d){__opcres.terminal.log("+Browsed, received "+(null==d?0:d.length)+" Childnode(s)");this.isBrowsed=!0;this.childNodes=[];for(var f in d)"has"!=f&&(this.childNodes.push(new __opctn.TreeNode(d[f].nodeId.nodeId,this.view,{browseName:d[f].browseName,displayName:d[f].displayName,nodeClass:d[f].nodeClass,referenceTypeId:d[f].referenceTypeId,typeDefinition:d[f].typeDefinition})),this.childNodes[this.childNodes.length-1].parentNode=this);a&&(b?a.apply(b):a())},this)};this.read=function(a,
b){__opcres.terminal.log("-Reading Node "+this.displayName.text+"...");__opccli.readNodes([this.nodeId],[13],function(f){__opcres.terminal.log("+Read Node");this.updateData(f[0].value.value);a&&(b?a.apply(b,[f]):a(f))},this)};this.updateData=function(a){this.value=a;for(a=0;a<this.observers.length;a++)this.observers[a].notify(this)}}}}();

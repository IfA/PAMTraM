<?xml version="1.0" encoding="UTF-8"?>
<!-- This uses Eclipse ANT tasks. It MUST run in the same JRE as the workspace. -->
<project name="org.eclipse.ocl.examples" default="zip.examples" basedir=".">
	<target name="init">
	</target>

	<patternset id="zip.excludes"
		excludes="src.zip,build.xml,javaCompiler*,temp.folder/**,@dot/**"/>
	
	<target name="zip.examples" depends="init">
		<!-- OCL examples -->
		<eclipse.convertPath resourcePath="org.eclipse.ocl.examples.interpreter" property="projectDir"/>
		<zip destfile="zips/interpreter.zip" basedir="${projectDir}">
			<patternset refid="zip.excludes"/>
		</zip>
		
		<eclipse.convertPath resourcePath="org.eclipse.ocl.examples.project.empty" property="projectDir"/>
		<zip destfile="zips/empty.zip" basedir="${projectDir}">
			<patternset refid="zip.excludes"/>
		</zip>
		
		<eclipse.convertPath resourcePath="org.eclipse.ocl.examples.project.completeocltutorial" property="projectDir"/>
		<zip destfile="zips/completeocltutorial.zip" basedir="${projectDir}">
			<patternset refid="zip.excludes"/>
		</zip>
		
		<eclipse.convertPath resourcePath="org.eclipse.ocl.examples.project.oclinecoretutorial" property="projectDir"/>
		
		<zip destfile="zips/oclinecoretutorial.zip" basedir="${projectDir}">
			<patternset refid="zip.excludes"/>
		</zip>
		
		<eclipse.convertPath resourcePath="org.eclipse.ocl.examples.project.royalandloyal" property="projectDir"/>
		<zip destfile="zips/royalandloyal.zip" basedir="${projectDir}">
			<patternset refid="zip.excludes"/>
		</zip>

		<!-- EMF examples -->
		<eclipse.convertPath resourcePath="org.eclipse.emf.examples.library" property="projectDir"/>
		<zip destfile="zips/library.zip" basedir="${projectDir}"/>
			
		<eclipse.convertPath resourcePath="org.eclipse.emf.examples.library.edit" property="projectDir"/>
		<zip destfile="zips/libraryEdit.zip" basedir="${projectDir}"/>
		
		<eclipse.convertPath resourcePath="org.eclipse.emf.examples.library.editor" property="projectDir"/>
		<zip destfile="zips/libraryEditor.zip" basedir="${projectDir}"/>
	</target>

	<target name="clean" depends="init" description="Clean the plug-in: org.eclipse.ocl.examples.">
		<delete>
			<fileset dir="zips" includes="*.zip"/>
		</delete>
		<antcall target="refresh"/>
	</target>

	<target name="refresh" depends="init" if="eclipse.running" description="Refresh this folder.">
		<eclipse.refreshLocal resource="/org.eclipse.ocl.examples" depth="infinite"/>
	</target>
</project>

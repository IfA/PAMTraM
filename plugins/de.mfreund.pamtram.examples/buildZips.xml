<?xml version="1.0" encoding="UTF-8"?>
<!-- This uses Eclipse ANT tasks. It MUST run in the same JRE as the workspace. -->
<project name="de.mfreund.pamtram.examples" default="zip.examples" basedir=".">
	<target name="init">
		<delete>
	<fileset dir="zips">
	</fileset>
</delete>

	</target>
	
	<!-- The files to include in the 'AutoProBe' example -->
	<patternset id="autoprobe.includes"
			includes="
				.project,
				metamodel/stgml.xsd_original.ecore,
				metamodel/stgml.xsd_enhanced.ecore,
				Pamtram/lib/**,
				Pamtram/STGML2Movisa_enhanced.pamtram,
				Pamtram/STGML2Movisa_original.pamtram,
				Source/beispiel_ver_0_2_3.xml,
				Target/out.movisa.xmi"/>
	
	<!-- The files to include in the 'ctt-aminolight' example -->
	<patternset id="ctt-aminolight.includes"
			includes="
				.project,
				ctt-aminolight.launch,
				metamodel/AMINO-UI.ecore,
				metamodel/ctt.xsd.ecore,
				metamodel/platform.ecore,
				Pamtram/ctt-aminolight.pamtram,
				Source/distanceMeassurement.xml,
				Source/Smartphone.xmi,
				Source/SmartphoneWithoutSound.xmi,
				Source/SmartphoneWithoutSoundAndVibration.xmi,
				Source/SmartphoneWithoutVibration.xmi,
				Target"/>
	
	<!-- The files to include in the 'disl-movisa' example -->
	<patternset id="disl-movisa.includes"
			includes="
				.project,
				disl-movisa.launch,
				metamodel/disl.ecore,
				Pamtram/Disl2Movisa.pamtram,
				Source/usecase_simple.xmi,
				Target/out.movisa.xmi"/>
	
	<!-- The files to include in the 'excel-movisa-tdp' example -->
	<patternset id="excel-movisa-tdp.includes"
			includes="
				.project,
				excel-movisa-tdp.launch,
				metamodel/mbtcp-variablen.xlsx,
				metamodel/movisa.ecore,
				metamodel/Variablen.ecore,
				Pamtram/excel-movisa-tdp.pamtram,
				Source/Variablen.xmi,
				Target"/>
	
	<!-- The files to include in the 'Visu+' example -->
	<patternset id="visu-plus.includes"
			includes="
				.project,
				visu-plus.launch,
				metamodel/**,
				Pamtram/visu-plus.pamtram,
				Source/beispiel_ver_0_2_3.xml,
				Target/IMAGES/**"/>
	
	<!-- The files to include in the 'w3caui-movisa' example -->
	<patternset id="w3caui-movisa.includes"
		includes="
			.project,
			w3caui-movisa.launch,
			w3caui-movisa-context-Kleinversuchsanlage01-withMappingConditions.launch,
			w3caui-movisa-context-Kleinversuchsanlage02-withMappingConditions.launch,
			metamodel/aui.xsd.ecore,
			metamodel/movisa.ecore,
			metamodel/platform_metamodel.ecore,
			Pamtram/w3caui-movisa.pamtram,
			Pamtram/w3caui-movisa01.pamtram,
			Pamtram/w3caui-movisa02.pamtram,
			Source/allgemeinesModell.xmi,
			Source/Kleinversuchsanlage.xmi,
			Source/PMbase1.xmi,
			Source/PMbase2.xmi,
			Source/PMbase3.xmi,
			Target/Kleinversuchsanlage.movisa.xmi,
			Target/allgemeinesModell.movisa.xmi"/>
	
	
	<!-- Zip the PAMTraM examples -->
	<target name="zip.examples" depends="init">
		<!-- AutoProBe -->
		<eclipse.convertPath resourcePath="de.mfreund.pamtram.casestudies.autoprobe" property="projectDir"/>
		<zip destfile="zips/autoprobe.zip" basedir="${projectDir}">
			<patternset refid="autoprobe.includes"/>
		</zip>
		
		<!-- CTT-Aminolight -->
		<eclipse.convertPath resourcePath="de.mfreund.pamtram.casestudies.ctt-aminolight" property="projectDir"/>
		<zip destfile="zips/ctt-aminolight.zip" basedir="${projectDir}">
			<patternset refid="ctt-aminolight.includes"/>
		</zip>
		
		<!-- Disl-Movisa -->
		<eclipse.convertPath resourcePath="de.mfreund.pamtram.casestudies.disl-movisa" property="projectDir"/>
		<zip destfile="zips/disl-movisa.zip" basedir="${projectDir}">
			<patternset refid="disl-movisa.includes"/>
		</zip>
		
		<!-- Excel-Movisa-TDP -->
		<eclipse.convertPath resourcePath="de.mfreund.pamtram.casestudies.excel-movisa-tdp" property="projectDir"/>
		<zip destfile="zips/excel-movisa-tdp.zip" basedir="${projectDir}">
			<patternset refid="excel-movisa-tdp.includes"/>
		</zip>
		
		<!-- Visu+ -->
		<eclipse.convertPath resourcePath="de.mfreund.pamtram.casestudies.visu-plus" property="projectDir"/>
		<zip destfile="zips/visu-plus.zip" basedir="${projectDir}">
			<patternset refid="visu-plus.includes"/>
		</zip>
		
		<!-- W3CAUI-Movisa -->
		<eclipse.convertPath resourcePath="de.mfreund.pamtram.casestudies.w3caui-movisa" property="projectDir"/>
		<zip destfile="zips/w3caui-movisa.zip" basedir="${projectDir}">
			<patternset refid="w3caui-movisa.includes"/>
		</zip>
		
	</target>

	<target name="clean" depends="init" description="Delete the old zip files.">
		<delete>
			<fileset dir="zips" includes="*.zip"/>
		</delete>
		<antcall target="refresh"/>
	</target>

	<target name="refresh" depends="init" if="eclipse.running" description="Refresh this folder.">
		<eclipse.refreshLocal resource="/de.mfreund.pamtram.examples" depth="infinite"/>
	</target>
</project>
